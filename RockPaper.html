<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rock-Paper-Scissors</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                fontFamily: {
                    sans: ['Inter', 'sans-serif'],
                    heading: ['Outfit', 'sans-serif'],
                },
                extend: {
                    colors: {
                        primary: '#6c5ce7',
                        secondary: '#a29bfe',
                        accent: '#fd79a8',
                        dark: '#1e202a',
                        surface: '#2b2e3b',
                        success: '#00b894',
                        danger: '#ff7675',
                        warning: '#fdcb6e',
                    },
                    animation: {
                        'fist-bump': 'fistBump 0.5s ease-in-out',
                        'shake': 'shakeHand 0.5s ease-in-out',
                        'pop': 'popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)',
                    },
                    keyframes: {
                        fistBump: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-30px)' },
                        },
                        shakeHand: {
                            '0%, 100%': { transform: 'translateX(0)' },
                            '25%': { transform: 'translateX(-10px)' },
                            '75%': { transform: 'translateX(10px)' },
                        },
                        popIn: {
                            '0%': { transform: 'scale(0.8)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }

    </style>
</head>
<body class="bg-[#13151b] text-white min-h-screen flex items-center justify-center p-4 font-sans overflow-x-hidden selection:bg-primary selection:text-white">

    <div class="w-full max-w-4xl bg-surface/30 backdrop-blur-xl rounded-3xl p-6 md:p-10 shadow-2xl border border-white/5 relative z-10 flex flex-col items-center">
        
        <!-- Header -->
        <header class="text-center mb-8 w-full">
            <h1 class="text-4xl md:text-5xl font-black font-heading bg-clip-text text-transparent bg-gradient-to-r from-pink-500 via-purple-500 to-indigo-500 mb-2 drop-shadow-sm">
                ROCK PAPER SCISSORS
            </h1>
            <a href="index.html" class="inline-flex items-center gap-2 mt-2 text-sm text-gray-500 hover:text-white transition-colors">
                <i class="fas fa-arrow-left"></i> Back to Hub
            </a>
        </header>

        <!-- Scoreboard -->
        <div class="grid grid-cols-3 gap-4 w-full max-w-2xl mb-8">
            <div class="bg-black/20 rounded-2xl p-4 text-center border border-white/5 backdrop-blur-sm group hover:bg-white/5 transition-colors">
                <div class="text-xs text-blue-400 font-bold tracking-wider mb-2 uppercase">You</div>
                <div class="text-3xl font-bold text-white group-hover:scale-110 transition-transform" id="player-score">0</div>
            </div>
            <div class="bg-black/20 rounded-2xl p-4 text-center border border-white/5 backdrop-blur-sm group hover:bg-white/5 transition-colors">
                <div class="text-xs text-gray-500 font-bold tracking-wider mb-2 uppercase">Rounds</div>
                <div class="text-3xl font-bold text-white group-hover:scale-110 transition-transform" id="rounds-played">0</div>
            </div>
            <div class="bg-black/20 rounded-2xl p-4 text-center border border-white/5 backdrop-blur-sm group hover:bg-white/5 transition-colors">
                <div class="text-xs text-pink-400 font-bold tracking-wider mb-2 uppercase">Computer</div>
                <div class="text-3xl font-bold text-white group-hover:scale-110 transition-transform" id="computer-score">0</div>
            </div>
        </div>

        <!-- Game Mode -->
        <div class="flex flex-wrap justify-center gap-3 mb-10">
            <button class="mode-btn active px-6 py-2 rounded-full text-sm font-bold border border-white/10 transition-all hover:bg-white/10" data-mode="infinite">Infinite</button>
            <button class="mode-btn px-6 py-2 rounded-full text-sm font-bold border border-white/10 transition-all hover:bg-white/10" data-mode="best5">Best of 5</button>
            <button class="mode-btn px-6 py-2 rounded-full text-sm font-bold border border-white/10 transition-all hover:bg-white/10" data-mode="best10">Best of 10</button>
        </div>

        <!-- Game Area -->
        <div class="flex flex-col md:flex-row justify-center items-center gap-10 md:gap-20 w-full mb-10">
            
            <!-- Player Section -->
            <div class="flex flex-col items-center">
                <h2 class="text-xl font-bold text-gray-300 mb-6 uppercase tracking-wide">Your Choice</h2>
                <div class="flex gap-4">
                    <button class="choice-btn w-20 h-20 md:w-24 md:h-24 rounded-full bg-white/5 border-2 border-white/10 hover:border-blue-400 hover:bg-blue-400/10 hover:shadow-[0_0_20px_rgba(96,165,250,0.3)] transition-all flex items-center justify-center group" data-choice="rock">
                        <i class="fas fa-hand-rock text-3xl md:text-4xl text-gray-400 group-hover:text-blue-400 transition-colors"></i>
                    </button>
                    <button class="choice-btn w-20 h-20 md:w-24 md:h-24 rounded-full bg-white/5 border-2 border-white/10 hover:border-purple-400 hover:bg-purple-400/10 hover:shadow-[0_0_20px_rgba(192,132,252,0.3)] transition-all flex items-center justify-center group" data-choice="paper">
                        <i class="fas fa-hand-paper text-3xl md:text-4xl text-gray-400 group-hover:text-purple-400 transition-colors"></i>
                    </button>
                    <button class="choice-btn w-20 h-20 md:w-24 md:h-24 rounded-full bg-white/5 border-2 border-white/10 hover:border-pink-400 hover:bg-pink-400/10 hover:shadow-[0_0_20px_rgba(244,114,182,0.3)] transition-all flex items-center justify-center group" data-choice="scissors">
                        <i class="fas fa-hand-scissors text-3xl md:text-4xl text-gray-400 group-hover:text-pink-400 transition-colors"></i>
                    </button>
                </div>
            </div>

            <!-- VS Divider (Visual) -->
            <div class="font-black text-2xl text-white/10 select-none">VS</div>

            <!-- Computer Section -->
            <div class="flex flex-col items-center">
                <h2 class="text-xl font-bold text-gray-300 mb-6 uppercase tracking-wide">Computer</h2>
                <div class="hand-display w-40 h-40 md:w-48 md:h-48 rounded-full bg-black/30 border-2 border-white/10 flex items-center justify-center shadow-inner relative overflow-hidden">
                    <div class="absolute inset-0 bg-gradient-to-br from-white/5 to-transparent pointer-events-none"></div>
                    <i class="fas fa-question text-6xl md:text-7xl text-white/50 transition-all" id="computer-hand"></i>
                </div>
            </div>
        </div>

        <!-- Result Area -->
        <div class="h-24 flex items-center justify-center mb-6">
            <div id="result-text" class="text-3xl md:text-4xl font-black text-white/50 transition-all duration-300 transform scale-90 opacity-0">
                Choose your weapon!
            </div>
        </div>

        <!-- Controls -->
        <div class="flex gap-4">
            <button id="restart-btn" class="px-8 py-3 bg-white/5 hover:bg-white/10 rounded-xl font-bold text-white border border-white/10 hover:border-white/30 transition-all flex items-center gap-2">
                <i class="fas fa-redo"></i> <span class="hidden sm:inline">Restart</span>
            </button>
            <button id="sound-toggle" class="px-8 py-3 bg-white/5 hover:bg-white/10 rounded-xl font-bold text-white border border-white/10 hover:border-white/30 transition-all flex items-center gap-2">
                <i class="fas fa-volume-up"></i> <span class="hidden sm:inline">Sound On</span>
            </button>
        </div>

    </div>

    <!-- Background decoration -->
    <div class="fixed top-0 left-0 w-full h-full pointer-events-none -z-10">
        <div class="absolute top-[10%] left-[20%] w-[500px] h-[500px] bg-blue-600/10 rounded-full blur-[120px]"></div>
        <div class="absolute bottom-[10%] right-[20%] w-[500px] h-[500px] bg-purple-600/10 rounded-full blur-[120px]"></div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Game state
            const gameState = {
                playerScore: 0,
                computerScore: 0,
                roundsPlayed: 0,
                gameMode: 'infinite',
                gameActive: true,
                soundEnabled: true
            };

            // DOM Elements
            const playerScoreEl = document.getElementById('player-score');
            const computerScoreEl = document.getElementById('computer-score');
            const roundsPlayedEl = document.getElementById('rounds-played');
            const resultTextEl = document.getElementById('result-text');
            const computerHandEl = document.getElementById('computer-hand');
            const choiceButtons = document.querySelectorAll('.choice-btn');
            const restartBtn = document.getElementById('restart-btn');
            const soundToggleBtn = document.getElementById('sound-toggle');
            const modeButtons = document.querySelectorAll('.mode-btn');

            // Web Audio API Context
            let audioCtx;

            function playSound(type) {
                if (!gameState.soundEnabled) return;
                
                // Lazy load audio context to avoid "not allowed to start" warning
                if (!audioCtx) {
                    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                }

                if (audioCtx.state === 'suspended') audioCtx.resume();

                const oscillator = audioCtx.createOscillator();
                const gainNode = audioCtx.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioCtx.destination);
                
                const now = audioCtx.currentTime;

                if (type === 'tap') {
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(400, now);
                    oscillator.frequency.exponentialRampToValueAtTime(800, now + 0.1);
                    gainNode.gain.setValueAtTime(0.1, now);
                    gainNode.gain.linearRampToValueAtTime(0, now + 0.1);
                    oscillator.start(now);
                    oscillator.stop(now + 0.1);
                } else if (type === 'reveal') {
                    oscillator.type = 'triangle';
                    oscillator.frequency.setValueAtTime(200, now);
                    oscillator.frequency.linearRampToValueAtTime(400, now + 0.1);
                    gainNode.gain.setValueAtTime(0.1, now);
                    gainNode.gain.linearRampToValueAtTime(0, now + 0.3);
                    oscillator.start(now);
                    oscillator.stop(now + 0.3);
                } else if (type === 'win') {
                    // Simple Major Chord Arpeggio
                    [523.25, 659.25, 783.99].forEach((freq, i) => {
                         const osc = audioCtx.createOscillator();
                         const gn = audioCtx.createGain();
                         osc.connect(gn);
                         gn.connect(audioCtx.destination);
                         osc.type = 'sine';
                         osc.frequency.value = freq;
                         gn.gain.setValueAtTime(0.1, now + (i*0.1));
                         gn.gain.linearRampToValueAtTime(0, now + (i*0.1) + 0.5);
                         osc.start(now + (i*0.1));
                         osc.stop(now + (i*0.1) + 0.5);
                    });
                } else if (type === 'lose') {
                     oscillator.type = 'sawtooth';
                     oscillator.frequency.setValueAtTime(200, now);
                     oscillator.frequency.linearRampToValueAtTime(50, now + 0.5);
                     gainNode.gain.setValueAtTime(0.1, now);
                     gainNode.gain.linearRampToValueAtTime(0, now + 0.5);
                     oscillator.start(now);
                     oscillator.stop(now + 0.5);
                }
            }

            // Update scoreboard
            function updateScoreboard() {
                playerScoreEl.textContent = gameState.playerScore;
                computerScoreEl.textContent = gameState.computerScore;
                roundsPlayedEl.textContent = gameState.roundsPlayed;
            }

            // Get computer choice
            function getComputerChoice() {
                const choices = ['rock', 'paper', 'scissors'];
                return choices[Math.floor(Math.random() * choices.length)];
            }

            // Get icon for choice
            function getIcon(choice) {
                switch(choice) {
                    case 'rock': return 'fa-hand-rock';
                    case 'paper': return 'fa-hand-paper';
                    case 'scissors': return 'fa-hand-scissors';
                    default: return 'fa-question';
                }
            }

            // Determine winner
            function determineWinner(playerChoice, computerChoice) {
                if (playerChoice === computerChoice) {
                    return 'draw';
                }
                
                if (
                    (playerChoice === 'rock' && computerChoice === 'scissors') ||
                    (playerChoice === 'paper' && computerChoice === 'rock') ||
                    (playerChoice === 'scissors' && computerChoice === 'paper')
                ) {
                    return 'win';
                }
                
                return 'lose';
            }

            // Display result
            function displayResult(result, playerChoice, computerChoice) {
                // Update computer hand
                computerHandEl.className = `fas ${getIcon(computerChoice)} text-6xl md:text-7xl transition-all animate-pop`;
                
                // Colors based on result
                if (result === 'win') {
                    computerHandEl.classList.add('text-gray-400'); // Neutral for computer hand
                } else if (result === 'lose') {
                    computerHandEl.classList.add('text-accent');
                } else {
                    computerHandEl.classList.add('text-warning');
                }
                
                // Show result text
                resultTextEl.className = 'text-3xl md:text-4xl font-black transition-all duration-300 transform scale-100 opacity-100';
                
                switch(result) {
                    case 'win':
                        resultTextEl.textContent = 'You Win!';
                        resultTextEl.classList.add('text-success', 'drop-shadow-lg', 'animate-pulse');
                        playSound('win');
                        break;
                    case 'lose':
                        resultTextEl.textContent = 'You Lose!';
                        resultTextEl.classList.add('text-danger', 'drop-shadow-lg', 'animate-shake');
                        playSound('lose');
                        break;
                    case 'draw':
                        resultTextEl.textContent = "It's a Draw!";
                        resultTextEl.classList.add('text-warning', 'drop-shadow-lg');
                        break;
                }
                
                // Add shake effect to hands if needed
                if (result === 'lose') {
                    document.querySelector('.hand-display').classList.add('animate-shake');
                    setTimeout(() => document.querySelector('.hand-display').classList.remove('animate-shake'), 500);
                }
            }

            // Play a round
            function playRound(playerChoice) {
                if (!gameState.gameActive) return;
                
                playSound('tap');
                
                // Disable buttons during animation
                choiceButtons.forEach(btn => {
                    btn.style.pointerEvents = 'none';
                    btn.classList.add('opacity-50');
                });
                
                // Show loading animation
                computerHandEl.className = 'fas fa-spinner fa-spin text-4xl text-white/30';
                resultTextEl.classList.remove('scale-100', 'opacity-100');
                resultTextEl.classList.add('scale-90', 'opacity-0');

                // Fist bump animation logic
                // Since layout is separated, we animate the computer container as placeholder perception
                const computerContainer = document.querySelector('.hand-display');
                computerContainer.classList.add('animate-fist-bump');
                
                // After animation, reveal choices
                setTimeout(() => {
                    computerContainer.classList.remove('animate-fist-bump');
                    
                    // Get computer choice
                    const computerChoice = getComputerChoice();
                    
                    // Reveal choices
                    playSound('reveal');
                    
                    // Determine winner
                    const result = determineWinner(playerChoice, computerChoice);
                    
                    // Update scores
                    gameState.roundsPlayed++;
                    
                    if (result === 'win') {
                        gameState.playerScore++;
                    } else if (result === 'lose') {
                        gameState.computerScore++;
                    }
                    
                    updateScoreboard();
                    
                    // Display result
                    displayResult(result, playerChoice, computerChoice);
                    
                    // Check if game should end
                    checkGameEnd();
                    
                    // Re-enable buttons
                    setTimeout(() => {
                        choiceButtons.forEach(btn => {
                            btn.style.pointerEvents = 'auto';
                            btn.classList.remove('opacity-50');
                        });
                    }, 1000);
                }, 800);
            }

            // Check if game should end
            function checkGameEnd() {
                if (gameState.gameMode === 'infinite') return;
                
                const targetRounds = gameState.gameMode === 'best5' ? 5 : 10;
                const roundsNeeded = Math.ceil(targetRounds / 2);
                
                // Use slightly delayed check to prevent instant interrupt
                if (gameState.playerScore >= roundsNeeded || gameState.computerScore >= roundsNeeded) {
                    gameState.gameActive = false;
                    
                    setTimeout(() => {
                        if (gameState.playerScore > gameState.computerScore) {
                            resultTextEl.textContent = `VICTORY! ${gameState.gameMode === 'best5' ? 'Best of 5' : 'Best of 10'} Won!`;
                            resultTextEl.className = 'text-3xl md:text-4xl font-black text-success animate-bounce';
                        } else {
                            resultTextEl.textContent = `DEFEAT! Computer Won ${gameState.gameMode === 'best5' ? 'Best of 5' : 'Best of 10'}!`;
                            resultTextEl.className = 'text-3xl md:text-4xl font-black text-danger animate-bounce';
                        }
                    }, 1500);
                }
            }

            // Restart game
            function restartGame() {
                gameState.playerScore = 0;
                gameState.computerScore = 0;
                gameState.roundsPlayed = 0;
                gameState.gameActive = true;
                
                updateScoreboard();
                
                // Reset hands
                computerHandEl.className = 'fas fa-question text-6xl md:text-7xl text-white/50';
                resultTextEl.textContent = 'Choose your weapon!';
                resultTextEl.className = 'text-3xl md:text-4xl font-black text-white/50 transition-all duration-300 transform scale-90 opacity-0';
                setTimeout(() => resultTextEl.classList.remove('opacity-0', 'scale-90'), 100);

                // Re-enable buttons
                 choiceButtons.forEach(btn => {
                    btn.style.pointerEvents = 'auto';
                    btn.classList.remove('opacity-50');
                });
            }

            // Toggle sound
            function toggleSound() {
                gameState.soundEnabled = !gameState.soundEnabled;
                soundToggleBtn.innerHTML = gameState.soundEnabled ? 
                    '<i class="fas fa-volume-up"></i> <span class="hidden sm:inline">Sound On</span>' : 
                    '<i class="fas fa-volume-mute"></i> <span class="hidden sm:inline">Sound Off</span>';
            }

            // Set game mode
            function setGameMode(mode) {
                gameState.gameMode = mode;
                modeButtons.forEach(btn => {
                    if (btn.dataset.mode === mode) {
                        btn.classList.add('bg-primary', 'border-primary', 'text-white', 'shadow-lg');
                        btn.classList.remove('active'); // legacy
                    } else {
                        btn.classList.remove('bg-primary', 'border-primary', 'text-white', 'shadow-lg', 'active');
                    }
                });
                restartGame();
            }

            // Event listeners
            choiceButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    const btn = e.currentTarget; 
                    playRound(btn.dataset.choice);
                });
            });
            
            restartBtn.addEventListener('click', restartGame);
            
            soundToggleBtn.addEventListener('click', toggleSound);
            
            modeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    setGameMode(button.dataset.mode);
                });
            });

            // Initialize game
            updateScoreboard();
            // trigger active state for infinite mode button visually
            setGameMode('infinite');
            
            // Initial animation for title or something?
            setTimeout(() => {
                resultTextEl.classList.remove('opacity-0', 'scale-90');
                resultTextEl.classList.add('opacity-100', 'scale-100');
            }, 500); 
        });
    </script>
</body>
</html>